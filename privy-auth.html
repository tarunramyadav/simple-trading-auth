<!DOCTYPE html>
<html>
  <head>
    <title>Privy Login</title>
    <script type="module">
      import { PrivyClient } from 'https://cdn.skypack.dev/@privy-io/client-sdk';

      const privy = new PrivyClient({
        appId: "cm8u305bh014ppienotvtaskr"
      });

      window.login = async () => {
        try {
          console.log("üîê Starting login.....");
          await privy.login();
          const user = await privy.getUser();
          const wallet = user?.wallet?.address;
          console.log("‚úÖ Wallet:", wallet);

          if (wallet) {
            window.location.href = `https://tarunramyadav.github.io/simple-trading-auth/success.html?wallet=${wallet}`;
          }
        } catch (err) {
          console.error("‚ùå Login failed..", err);
          document.body.innerHTML = "<h2>Login failed. Check console.</h2>";
        }
      };
    </script>
  </head>
  <body>
    <h2>Click below to login with Privy</h2>
    <button onclick="login()">Connect Wallet</button>
  </body>
</html>
